!function(){function e(){for(var e=document.querySelectorAll("[mk]"),r=0;r<e.length;++r){for(var t=e[r].getAttribute("mk").split(";"),a=[],n=0;n<t.length;n++){var o=t[n].split("=");a.push({Name:o[0],Value:o[1]})}e[r].addEventListener("keypress",function(e){var r=this.value;""!=String.fromCharCode(e.keyCode)&&(r=this.value+String.fromCharCode(e.keyCode)),t=this.getAttribute("mk").split(";");for(var a=0;a<t.length;a++){var n=t[a].split("=");"value"===n[0]&&Mark.set(n[1],r)}}),MarkNodes.push({Node:e[r],Marks:a})}for(var l=document.getElementsByTagName("template"),r=0;r<l.length;r++){for(var i=l[0].content.children,s={Name:l[r].getAttribute("name"),Node:l[r],ChildNodes:[],Events:{},Helpers:{}},n=0;n<i.length;n++)i[n].getAttribute("mk")&&s.ChildNodes.push(i[n]);Template[l[r].getAttribute("name")]=s}}function r(){for(var e=Object.keys(Mark),r=0;r<e.length;r++)t(e[r])}function t(e){for(var r=0;r<MarkNodes.length;r++)for(var t=0;t<MarkNodes[r].Marks.length;t++){var a=MarkNodes[r].Marks[t];"text"===a.Name&&a.Value===e?MarkNodes[r].Node.innerHTML=Mark.get(e):"value"===a.Name&&a.Value===e?MarkNodes[r].Node.value=Mark.get(e):"check"===a.Name&&a.Value===e&&(MarkNodes[r].Node.checked=Mark.get(e))}}function a(){for(var e=Object.keys(Template),r=0;r<e.length;r++)n(e[r])}function n(e){for(var r=0;r<MarkNodes.length;r++)for(var t=0;t<MarkNodes[r].Marks.length;t++){var a=MarkNodes[r].Marks[t];if("template"===a.Name&&a.Value===e){for(var n=Template[e].ChildNodes,l=0;l<n.length;l++)for(var i=n[l].getAttribute("mk").split(";"),s=0;s<i.length;s++)n[l].innerHTML=Mark.get("Name");MarkNodes[r].Node.innerHTML=o(e)}}}function o(e){return Template[e].Node.innerHTML}MarkNodes=[],Template={},Mark={},Mark.set=function(e,r){Mark[e]=r,t(e),a()},Mark.get=function(e){return Mark[e]},document.addEventListener("DOMContentLoaded",function(){e(),r(),a()},!1)}();